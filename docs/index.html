<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Management System - Microservices Architecture</title>
    <link rel="stylesheet" href="auth.css">
    <link rel="stylesheet" href="main.css">
    <script src="main.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Patient Management System</h1>
            <p>Microservices-Based Healthcare Management Backend</p>
        </header>
        <section class="section">
            <h2>Project Overview</h2>
            <p>This project is a <strong>microservices-based backend system</strong> for managing appointments,
                patients, doctors, and billing in a healthcare environment. It follows a modular, scalable design and
                uses different databases tailored to each service's needs.</p>

            <div class="overview-grid">
                <div class="overview-item">
                    <h4>Architecture</h4>
                    <p>6 independent microservices with API Gateway</p>
                </div>
                <div class="overview-item">
                    <h4>Containerization</h4>
                    <p>Fully dockerized with Docker Compose</p>
                </div>
                <div class="overview-item">
                    <h4>Event-Driven</h4>
                    <p>Apache Kafka for service communication</p>
                </div>
                <div class="overview-item">
                    <h4>Multi-Database</h4>
                    <p>MySQL, PostgreSQL, and MongoDB</p>
                </div>
            </div>
        </section>
        <section class="section">
            <h2>System Architecture</h2>
            <p>The system consists of the following microservices, each containerized via Docker:</p>

            <table class="port-table">
                <thead>
                    <tr>
                        <th>Service</th>
                        <th>Port</th>
                        <th>Database</th>
                        <th>Primary Function</th>
                    </tr>
                </thead>
                <tbody>
                <tr>
                    <td><strong>API Gateway</strong></td>
                    <td>4004</td>
                    <td>-</td>
                    <td>Request routing and management</td>
                </tr>
                <tr>
                    <td><strong>Patient Service</strong></td>
                    <td>8080</td>
                    <td>MySQL</td>
                    <td>Patient records management</td>
                </tr>
                <tr>
                    <td><strong>Billing Service</strong></td>
                    <td>8081</td>
                    <td>PostgreSQL</td>
                    <td>Payment processing and billing</td>
                </tr>
                <tr>
                    <td><strong>Analytics Service</strong></td>
                    <td>8082</td>
                    <td>MongoDB</td>
                    <td>Data analytics and reporting</td>
                </tr>
                <tr>
                    <td><strong>Doctor Service</strong></td>
                    <td>8083</td>
                    <td>MySQL</td>
                    <td>Doctor profiles and specializations</td>
                </tr>
                <tr>
                    <td><strong>Appointment Service</strong></td>
                    <td>8084</td>
                    <td>PostgreSQL</td>
                    <td>Appointment scheduling and validation</td>
                </tr>
                </tbody>
            </table>
        </section>
        <section class="section">
            <h2>Microservices Details</h2>
            <div class="architecture-grid">
                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üë•</div>
                        <h3>Patient Service</h3>
                    </div>
                    <div class="database-info">
                        <strong>Database:</strong> Postgresql | <strong>Port:</strong> 8080
                    </div>
                    <p><strong>Responsibility:</strong> This microservice is responsible for managing endpoints about patient records. The relationship between Kafka and Patient Service sends an event to the Analytics Service. The database of this microservice is PostgresSQL and it runs simultaneously with the microservice, thanks to docker-compose. </p>
                    <div class="code-block">{
                        "id": UUID,
                        "name": String,
                        "email": String,
                        "address": String,
                        "dateOfBirth": LocalDate,
                        "registeredDate" LocalDate,
                        }</div>
                </div>

                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üë®‚Äç‚öïÔ∏è</div>
                        <h3>Doctor Service</h3>
                    </div>
                    <div class="database-info">
                        <strong>Database:</strong> MySQL | <strong>Port:</strong> 8083
                    </div>
                    <p><strong>Responsibilities:</strong> This microservice is responsible for managing endpoints about doctor records. The database of that microservice is MySQL. The reason beyond this database selection, it's generally optimized for read-heavy operations and offers slightly better performance in that context. </p>
                    <div class="code-block">{
                        "id": UUID,
                        "name": String,
                        "yearsOfExperience": Integer,
                        "hospitalName": String,
                        "department": String,
                        "licenseNumber" Integer,
                        "specialization": ENUM,
                        "Number": String,
                        "email": String,
                        "available": Boolean,
                        "gender": ENUM
                        }</div>
                </div>

                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üìÖ</div>
                        <h3>Appointment Service</h3>
                    </div>
                    <div class="database-info">
                        <strong>Database:</strong> PostgreSQL | <strong>Port:</strong> 8084
                    </div>
                    <p><strong>Responsibilities:</strong> This microservice is responsible for managing appointments, verifying IDs, notifying other services with Kafka. The database of this microservice is PostgresSQL. It also has two services. One of the services is managing appointment process. With the help of Rest Template, this service verify the Patient ID and Doctor ID to create an appointment. Also, if any patient's payment process is successful then Kafka triggers an event for The Billing Service. The second service of this microservice is <code>Cleanup Service</code>, manages deleting outdated appointments every day.
                    </p>
                    <div class="code-block">{
                        "patientId": UUID,
                        "doctorId": UUID,
                        "serviceDate": String,
                        "serviceDateEnd": String,
                        "serviceType": ServiceType,
                        "amount": float,
                        "paymentStatus": boolean,
                        "PaymentType": paymentType
                        }</div>
                </div>

                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üí∞</div>
                        <h3>Billing Service</h3>
                    </div>
                    <div class="database-info">
                        <strong>Database:</strong> PostgreSQL | <strong>Port:</strong> 8081
                    </div>
                    <p><strong>Responsibilities:</strong> This microservice is responsible for creating billing records after appointments. It creates an invoice for a patient with invoice-generator API, and it stores invoice instances <i>(PDF)</i> on Billing Service image.</p>

                    <div class="code-block">{
                        "patientId": Long,
                        "appointmentId": Long,
                        "paymentStatus": Boolean,
                        "paymentType": ENUM
                        }</div>
                </div>

                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üìä</div>
                        <h3>Analytics Service</h3>
                    </div>
                    <div class="database-info">
                        <strong>Database:</strong> MongoDB | <strong>Port:</strong> 8082
                    </div>Storing event-based and analytical data (trends, usage stats)
                    </p>
                </div>

                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üåê</div>
                        <h3>API Gateway</h3>
                    </div>
                    <div class="database-info">
                        <strong>Port:</strong> 4004
                    </div>
                    <p><strong>Responsibilities:</strong> This microservice is responsible for managing request routing, and API management.</p>
                </div>

                <div class="service-card">
                    <div class="service-header">
                        <div class="service-icon">üåê</div>
                        <h3>Common Things</h3>
                    </div>
                    <ul class="tech-list">
                        <li><span class="icon">‚úî</span>Logger - slf4j -</li>
                        <li><span class="icon">‚úî</span>REST API</li>
                        <li><span class="icon">‚úî</span>Docker Compose</li>
                        <li><span class="icon">‚úî</span>API Gateway Routing</li>
                        <li><span class="icon">‚úî</span>Kafka</li>
                        <li><span class="icon">‚úî</span>SQL</li>
                    </ul>
                </div>
            </div>
        </section>
        <section class="section">
            <h2>How Authenticaton And Authorization Works?</h2>
            <div class="particles" id="particles"></div>

            <div class="status" id="status">Ready to authenticate...</div>

            <div class="container">

                <div class="service-container">

                    <!-- User -->
                    <div class="service" id="user">
                        <div class="service-icon user">üë§</div>
                        <div class="service-name">User</div>
                        <div class="service-desc">Makes request to protected resource</div>
                        <div class="response-text" id="userResponse">Sending request...</div>
                    </div>

                    <!-- API Gateway -->
                    <div class="service" id="gateway">
                        <div class="service-icon gateway">üåê</div>
                        <div class="service-name">API Gateway</div>
                        <div class="service-desc">Routes requests & handles authentication</div>
                        <div class="response-text" id="gatewayResponse">Routing to auth...</div>
                    </div>

                    <!-- Auth Service -->
                    <div class="service" id="auth">
                        <div class="service-icon auth">üîê</div>
                        <div class="service-name">Auth Service</div>
                        <div class="service-desc">Handles login/register & JWT generation</div>
                        <div class="response-text" id="authResponse">Generating JWT...</div>
                        <div class="jwt-token" id="jwtToken">eyJhbGciOiJIUzI1NiJ9.eyJzdWI...</div>
                    </div>

                    <!-- Database -->
                    <div class="service" id="database">
                        <div class="service-icon database">üóÑÔ∏è</div>
                        <div class="service-name">Database</div>
                        <div class="service-desc">Stores user credentials & data</div>
                        <div class="response-text" id="dbResponse">User validated ‚úì</div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button class="btn" onclick="startAnimation()">üöÄ Start Authentication</button>
                <button class="btn" onclick="resetAnimation()">üîÑ Reset</button>
                <button class="btn" onclick="showRegisterFlow()">üìù Register Flow</button>
            </div>
        </section>
        <section class="section">
            <h2>Appointment Validation Flow</h2>
            <p>When a user tries to create an appointment, the system follows this validation process:</p>

            <div class="validation-flow">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div>
                        <strong>Request Received</strong><br>
                        The Appointment Service receives the appointment creation request
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div>
                        <strong>Patient Validation</strong><br>
                        Sends GET request to Patient Service to verify if the patientId exists
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div>
                        <strong>Doctor Validation</strong><br>
                        Sends GET request to Doctor Service to verify if the doctorId exists
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div>
                        <strong>Appointment Creation</strong><br>
                        If both validations pass, the appointment is created and stored
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">5</div>
                    <div>
                        <strong>Billing Trigger</strong><br>
                        A billing record is automatically triggered and created as PDF
                    </div>
                </div>
            </div>
        </section>
        <section class="section">
            <h2>Billing - Invoice Flow</h2>
            <p>When a user create an appointment, the system follows this process for billing:</p>

            <div class="validation-flow">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div>
                        <strong>Kafka Triggered</strong><br>
                        The Kafka Receiver receives the necessary data from Appointment Service
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div>
                        <strong>Generating Unique ID And Using The Given Data</strong><br>
                        Process the data and creates Invoice Path
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div>
                        <strong>Invoice PDF Generated</strong><br>
                        With the help of Invoice Generator API, Billing process is ended.
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div>
                        <strong>Result</strong><br>
                        <div style="text-align: center;">
                            <img src="invoice_screenshot.png" alt="Instance" width="300" height="400"/>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="section">
            <h2>Api Gateway Flow</h2>
            <p>When a user request to an endpoint, the system follows this process for Api Gateway:</p>

            <div class="validation-flow">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div>
                        <strong>Client Request ‚Üí API Gateway</strong><br>
                        User sends a request (e.g. <code>http://localhost:4004/api/patients</code>) to API Gateway.
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div>
                        <strong>Predicate Check</strong><br>
                        Gateway checks the <code>Path</code> predicates to determine the correct microservice
                        (<code>patient-service</code>, <code>doctor-service</code>, <code>appointment-service</code>, etc.).
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div>
                        <strong>Apply Filters</strong><br>
                        Defined filters are applied (e.g. <code>StripPrefix</code>, <code>RewritePath</code>)
                        to adjust the request before forwarding.
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div>
                        <strong>Forward to Target Service</strong><br>
                        The modified request is forwarded to the target microservice
                        (e.g. <code>patient-service:8080</code>).
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">5</div>
                    <div>
                        <strong>Service Processes Request</strong><br>
                        The microservice executes business logic and returns a response.
                    </div>
                </div>
                <div class="flow-step">
                    <div class="step-number">6</div>
                    <div>
                        <strong>Response Returned</strong><br>
                        API Gateway sends the response back to the client,
                        so the user still communicates via <code>http://localhost:4004</code>.
                    </div>
                </div>
            </div>
        </section>
        <section class="section">
            <h2>Technology Stack</h2>
            <div class="tech-list">
                <div class="tech-item">
                    <strong>Spring Boot</strong>
                    <p>Microservices Framework</p>
                </div>
                <div class="tech-item">
                    <strong>Docker</strong>
                    <p>Containerization</p>
                </div>
                <div class="tech-item">
                    <strong>Apache Kafka</strong>
                    <p>Event Streaming</p>
                </div>
                <div class="tech-item">
                    <strong>MySQL</strong>
                    <p>Relational Database</p>
                </div>
                <div class="tech-item">
                    <strong>PostgreSQL</strong>
                    <p>ACID Compliance</p>
                </div>
                <div class="tech-item">
                    <strong>MongoDB</strong>
                    <p>Document Database</p>
                </div>
            </div>
        </section>
        <section class="section">
            <h2>Postman Collection</h2>
            <p>Test all API endpoints with this ready-to-use Postman collection. Import the collection into your Postman to explore requests, headers, and sample responses.</p>

            <div class="cta-buttons">

                <a href="https://www.postman.com/spacecraft-astronaut-67997412/workspace/patient-management/folder/32076392-560c6040-1ca9-429b-8294-c26a30e2127d?action=share&creator=32076392&ctx=documentation" class="btn btn-primary" target="_blank">Open Postman Collection</a>
            </div>

    </pre>
        </section>
        <section class="section">
            <h2>Key Features</h2>
            <ul>
                <li><strong>Event-Driven Architecture:</strong> Apache Kafka enables asynchronous communication between microservices for loose coupling and real-time notifications.</li>
                <li><strong>Database Optimization:</strong> Each service uses the most appropriate database technology: MySQL for read-heavy operations, PostgreSQL for transactional data, and MongoDB for analytical/event data.</li>
                <li><strong>Scalable Microservices:</strong> Independent services can be scaled individually based on workload, improving performance and resilience.</li>
                <li><strong>API Gateway Management:</strong> Centralized request routing, path-based predicates, and filter mechanisms such as StripPrefix and RewritePath simplify client interactions.</li>
                <li><strong>Automated Billing & PDF Generation:</strong> Billing Service creates invoices automatically after appointment completion, storing PDFs efficiently.</li>
                <li><strong>Real-Time Validation:</strong> Appointment Service validates patients and doctors using REST APIs before scheduling to ensure data integrity.</li>
                <li><strong>Containerization with Docker:</strong> Each service runs in its own container, enabling consistent environments and simplified deployment through Docker Compose.</li>
                <li><strong>Logging & Monitoring:</strong> SLF4J logging ensures traceability and monitoring across services for debugging and analytics.</li>
                <li><strong>Analytics & Reporting:</strong> Analytics Service collects event-driven data for trends, usage statistics, and reporting, using MongoDB.</li>
                <li><strong>Multi-Database Architecture:</strong> Supports multiple database systems tailored to service requirements, improving efficiency and maintainability.</li>
                <li><strong>Secure & Maintainable Code:</strong> Clear separation of concerns, modular microservices, and RESTful endpoints ensure maintainable and testable backend code.</li>
                <li><strong>High Availability:</strong> Independent services with container orchestration allow for fault tolerance and minimal downtime.</li>
            </ul>
        </section>
        <section class="cta-section">
            <h2>View Project</h2>
            <p>Explore the complete source code and documentation for this microservices architecture</p>
            <div class="cta-buttons">
                <a href="https://github.com/doguhanniltextra/patient-management" class="btn btn-primary"
                    target="_blank">View on GitHub</a>
                <a href="mailto:doguhannilt@gmail.com" class="btn btn-secondary">Contact Developer</a>
            </div>
        </section>
    </div>
</body>
</html>